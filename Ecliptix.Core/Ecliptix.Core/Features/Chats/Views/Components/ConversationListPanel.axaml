<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Ecliptix.Core.Features.Chats.ViewModels"
             xmlns:components="clr-namespace:Ecliptix.Core.Features.Chats.Views.Components"
             mc:Ignorable="d"
             d:DesignWidth="320"
             d:DesignHeight="600"
             x:DataType="vm:ChatListViewModel"
             x:Class="Ecliptix.Core.Features.Chats.Views.Components.ConversationListPanel">

    <Border Background="#252525"
            BorderThickness="0"
            CornerRadius="0">
        <Grid RowDefinitions="Auto,Auto,*">
            <!-- Header -->
            <Border Grid.Row="0"
                    Padding="16"
                    BorderBrush="#3A3A3A"
                    BorderThickness="0,0,0,1">
                <TextBlock Text="Chats"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="#FFFFFF" />
            </Border>

            <!-- Search Bar -->
            <Border Grid.Row="1"
                    Padding="12"
                    BorderBrush="#3A3A3A"
                    BorderThickness="0,0,0,1">
                <TextBox Text="{Binding SearchText}"
                         Watermark="Search conversations..."
                         Background="#2E2E2E"
                         BorderBrush="#3A3A3A"
                         BorderThickness="1"
                         Padding="10,8"
                         CornerRadius="8"
                         Foreground="#FFFFFF" />
            </Border>

            <!-- Conversations List -->
            <ScrollViewer Grid.Row="2"
                          VerticalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding FilteredConversations}"
                              Padding="4">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Background="Transparent"
                                    BorderThickness="0"
                                    Padding="0"
                                    Command="{Binding $parent[UserControl].((vm:ChatListViewModel)DataContext).SelectConversationCommand}"
                                    CommandParameter="{Binding}"
                                    HorizontalContentAlignment="Stretch"
                                    VerticalContentAlignment="Stretch">
                                <components:ConversationItem DataContext="{Binding}" />
                            </Button>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>
    </Border>
</UserControl>
